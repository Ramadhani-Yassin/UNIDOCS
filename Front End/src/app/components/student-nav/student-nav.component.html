<!-- Mobile overlay -->
<div class="sidebar-overlay" 
     *ngIf="(sidebarService.isOpen$ | async) && isMobile"
     (click)="sidebarService.close()"></div>

<!-- SIDEBAR -->
<section id="sidebar" [class.hide]="!(sidebarService.isOpen$ | async)">
  <a routerLink="/dashboard" class="brand">
    <i class="bx bxs-graduation"></i>
    <span class="text">UNIDOCS</span>
  </a>
  <ul class="side-menu top">
    <li class="active">
      <a routerLink="/dashboard">
        <i class="bx bxs-dashboard"></i>
        <span class="text">Dashboard</span>
      </a>
    </li>
    <li>
      <a routerLink="/application">
        <i class="bx bxs-shopping-bag-alt"></i>
        <span class="text">Letter Applications</span>
      </a>
    </li>

    <li> 
      <a routerLink="/All-Applications">
        <i class="bx bx-file"></i>
        <span class="text">All Applications</span>
      </a>
    </li>

    <li> 
      <a routerLink="/generate-cv">
        <i class="bx bx-briefcase"></i>
        <span class="text">CV Generator</span>
      </a>
    </li>

    <li>
      <a routerLink="/analytics">
        <i class="bx bxs-doughnut-chart"></i>
        <span class="text">Analytics</span>
      </a>
    </li>
    <li> 
      <a routerLink="/announcements">
        <i class="bx bxs-megaphone"></i>
        <span class="text">Announcements</span>
      </a>
    </li>
  </ul>
  <ul class="side-menu">
    <li [class.active]="isActive('/settings')">
      <a routerLink="/settings">
        <i class="bx bxs-cog"></i>
        <span class="text">Settings</span>
      </a>
    </li>
    <li>
      <a href="#" class="logout" (click)="openLogoutModal($event)">
        <i class="bx bxs-log-out-circle"></i>
        <span class="text">Logout</span>
      </a>
    </li>
  </ul>
</section>

<!-- NAVBAR -->
<nav [class.sidebar-collapsed]="!(sidebarService.isOpen$ | async)">
  <i (click)="toggleSidebar()" class="bx bx-menu"></i>
  <a routerLink="/dashboard" class="nav-link">Student</a>
  <form action="#">
    <div class="form-input">
    <input
        type="search"
        placeholder=""
        readonly
        style="background: #eee; cursor: not-allowed;"
      />
      <button type="button" class="search-btn">
        <i class="bx bx-user"></i>
      </button>
    </div>
  </form>
  <button
    type="button"
    class="help-btn stylish-help"
    aria-label="Help"
    (click)="showHelpModal = true"
  >
    <i class="bx bxs-info-circle"></i>
  </button>
</nav>

<div class="help-modal-backdrop" *ngIf="showHelpModal">
  <div class="help-modal">
    <button class="close-btn" (click)="showHelpModal = false" aria-label="Close">&times;</button>
    <div class="help-modal-header">
      <i class="bx bxs-info-circle"></i>
      <h2>Need Help?</h2>
    </div>
    <div class="help-modal-body">
      <p>
        Welcome to <strong>UNIDOCS</strong>!<br>
        For assistance, please contact
        <a href="mailto:unidocs.ramadhani@gmail.com">unidocs.ramadhani@gmail.com</a>
        or visit our
        <a [routerLink]="['/home']">Help Center</a>.<br>
        You can also check our
        <a [routerLink]="['/about-us']">FAQ</a>
        for common questions.
      </p>
    </div>
    <div class="help-modal-footer">
      <button class="contact-btn" (click)="showHelpModal = false">Got it!</button>
    </div>
  </div>
</div>

<div class="logout-modal-backdrop" *ngIf="showLogoutModal">
  <div class="logout-modal">
    <button class="close-btn" (click)="showLogoutModal = false" aria-label="Close">&times;</button>
    <div class="logout-modal-header">
      <i class="bx bxs-log-out-circle"></i>
      <h2>Confirm Logout</h2>
    </div>
    <div class="logout-modal-body">
      <p>Are you sure you want to logout from <strong>UNIDOCS</strong>?</p>
    </div>
    <div class="logout-modal-footer">
      <button class="contact-btn" (click)="showLogoutModal = false">Cancel</button>
      <button class="logout-btn" (click)="performLogout()">Logout</button>
    </div>
  </div>
</div>